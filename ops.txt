
Rsrc1: Rs

Rsrc2: Rt, Rd
	Rsrc2 src:	0 Rt
			1 Rd


A: R1

B: R2, OP
	B src:	0 R2
		1 OP

Madr: PC, RESULT
	Madr src:	0 PC
			1 RESULT

Mem: R2

HI: ALU HI

LO: ALU R

PC WRT: 0, 1, ALU EQ, NOT ALU EQ
	PC WRT SRC:	00 0
			01 1
			10 ALU EQ
			11 NOT ALU EQ


PC: PC+1, PC+OP<<1, OP, R2
	PC src:	00 PC+1
		01 PC+OP<<1
		10 OP
		11 R2

IR: Mem

OP: Mem

Rdst: Rd

Rdata: RESULT, 1, PC, HI, LO, Mem
	Rdata src:	000 RESULT
			001 ALU LT
			010 PC
			011 HI
			100 LO
			101 Mem

ALU OP:
	0000	add
	0001	sub
	0010	sll
	0011	srl
	0100	sra
	0101	and
	0110	or
	0111	nor
	1000	xor
	1001	mul
	1010	div

------------

CONTROL

input

T 0000
FETCH 0
INSTRUCTION 00000

output

HALT 0			23
T RESET 0		22
FETCH 0			21
PC SRC 00		19
PC WRT 00		17
MAR SRC 0		16
MEM WRT 0		15
IR WRT 0		14
OP WRT 0		13
REG SRC 000		10
REG WRT 0		9
ALU B SRC 0		8
REG SRC2 SRC 0		7
ALU OP 0000		3
RESULT WRT 0		2
LO WRT 0		1
HI WRT 0		0


add

fetch:
	PC -> Madr ; Mem -> IR
	PC + 1 -> PC
	PC -> Madr ; Mem -> OP
	PC + 1 -> PC

execute:

0000000	add	d, s, t

	Rs -> A ; Rt -> B ; 0000 -> ALU OP ; ALU R -> RESULT
	RESULT -> Rd

1 00000 0000 ; 0 0 1 00 00 0 0 1 0 000 0 0 0 0000 0 0 0	-	10 0000 0000 ; 0010 0000 0100 0000 0000 0000	:	200 204000
1 00000 0001 ; 0 0 1 00 01 0 0 0 0 000 0 0 0 0000 0 0 0	-	10 0000 0001 ; 0010 0010 0000 0000 0000 0000	:	201 220000
1 00000 0010 ; 0 0 1 00 00 0 0 0 1 000 0 0 0 0000 0 0 0	-	10 0000 0010 ; 0010 0000 0010 0000 0000 0000	:	202 202000
1 00000 0011 ; 0 0 0 00 01 0 0 0 0 000 0 0 0 0000 0 0 0	-	10 0000 0011 ; 0000 0010 0000 0000 0000 0000	:	203 020000

0 00000 0100 ; 0 0 0 00 00 0 0 0 0 000 0 0 0 0000 1 0 0	-	00 0000 0100 ; 0000 0000 0000 0000 0000 0100	:	004 000004
0 00000 0101 ; 0 1 1 00 00 0 0 0 0 000 1 0 0 0000 0 0 0	-	00 0000 0101 ; 0110 0000 0000 0010 0000 0000	:	005 600200

0000001	addi	r4, r4, 1

	Rs -> A ; OP -> B ; 0000 -> ALU OP ; ALU R -> RESULT	
	RESULT -> Rd

0 00001 0100 ; 0 0 0 00 00 0 0 0 0 000 0 1 0 0000 1 0 0	-	00 0001 0100 ; 0000 0000 0000 0001 0000 0100	:	014 000104
0 00001 0101 ; 0 1 1 00 00 0 0 0 0 000 1 0 0 0000 0 0 0	-	00 0001 0101 ; 0110 0000 0000 0010 0000 0000	:	015 600200


0010101	j	C

	OP -> PC

0 10101 0100 ; 0 1 1 10 01 0 0 0 0 000 0 0 0 0000 0 0 0	-	01 0101 0100 ; 0111 0010 0000 0000 0000 0000	:	254 720000
	
	

0001101	slt	d, s, t

	Rs -> A ; Rt -> B ; 0000 -> ALU OP
	ALU lt -> REG DATA

0 01101 0100 ; 0 0 0 00 00 0 0 0 0 000 0 0 0 0000 0 0 0	-	00 1101 0100 ; 0000 0000 0000 0000 0000 0000	:	0d4 000000
0 01101 0101 ; 0 1 1 00 00 0 0 0 0 001 1 0 0 0000 0 0 0	-	00 1101 0101 ; 0110 0000 0000 0110 0000 0000	:	0d5 600600
	
0001011	beq	s, d, C	Y

	Rs -> A ; Rd -> B ; 0000 -> ALU OP
	PC + (OP<<1) -> PC SRC ; ALU EQ -> PC WRT SRC
	
0 01011 0100 ; 0 0 0 00 00 0 0 0 0 000 0 0 1 0000 0 0 0
0 01011 0101 ; 0 1 1 01 10 0 0 0 0 000 0 0 0 0000 0 0 0


0011000	jalr	d, s	X

	PC -> Rd
	Rs -> PC

0 11000 0100 ; 0 0 0 00 00 0 0 0 0 010 1 0 0 0000 0 0 0
0 11000 0101 ; 0 1 1 01 01 0 0 0 0 000 0 0 0 0000 0 0 0


0011001	lw	d, s, C	Y	d <- [s+C]

	Rs -> A ; OP -> B ; 0000 -> ALU OP ; ALU R -> RESULT 
	RESULT -> Madr ; Mem -> Rd

0 11001 0100 ; 0 0 0 00 00 0 0 0 0 000 0 1 0 0000 1 0 0	-	01 1001 0100 ; 0000 0000 0000 0001 0000 0100	:	194 000104
0 11001 0101 ; 0 1 1 00 00 1 0 0 0 101 1 0 0 0000 0 0 0	-	01 1001 0101 ; 0110 0001 0001 0110 0000 0000	:	195 611600


0011010	sw	d, s, C	Y	[s+C] <- d

	Rs -> A ; OP -> B ; 0000 -> ALU OP ; ALU R -> RESULT
	RESULT -> Madr ; Rd -> Mem

0 11010 0100 ; 0 0 0 00 00 0 0 0 0 000 0 1 0 0000 1 0 0	-	01 1010 0100 ; 0000 0000 0000 0001 0000 0100	:	1a4 000104
0 11010 0101 ; 0 1 1 00 00 1 1 0 0 000 0 0 1 0000 0 0 0	-	01 1010 0101 ; 0110 0001 1000 0000 1000 0000	:	1a5 618080

0011111 halt

	1 -> HALT
	
0 11111 0100 ; 1 0 0 00 00 0 0 0 0 000 0 0 0 0000 0 0 0	-	01 1111 0100 ; 1000 0000 0000 0000 0000 0000	:	1f4 800000
	